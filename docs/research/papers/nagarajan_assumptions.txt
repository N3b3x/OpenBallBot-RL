(DSS) and vice versa. Unlike in (Hollis 2006; Lauwers
et al. 2006, 2005), the balancing controller presented
here enables the ballbot to be robust to large disturbances, including shoves and kicks, and also collisions
against walls and tables.
This paper also presents an offline trajectory planning
algorithm that plans body lean trajectories so as to move
the robot to a desired position on the floor while satisfying the dynamic constraints associated with balancing.
--
in (Oriolo and Nakamura 1991). Olfati-Saber presented
explicit cascade normal forms for different classes of
underactuated mechanical systems and also presented
partial feedback linearization techniques for controlling
them (Olfati-Saber 2001). In (Rosas et al. 2001), the
trajectory planning problem of an underactuated planar
2R manipulator is solved using offline planned trajectories, which are constructed with smooth sinusoids.
--
median sagital plane and the median coronal plane is
decoupled, (iii) the equations of motion in these two
planes are identical, and (iv) the floor is assumed to be
flat and level. With these assumptions, we design two
decoupled, independent planar controllers and trajectory
planners for the 3D system.
The stabilizing controllers for the ballbot presented in
Sec. V are designed as linear controllers. The linearized
dynamics of the full 3D ballbot system about the origin is
decoupled between the two orthogonal planes of motion,
which validates the use of decoupled planar models
for linear control design. In the full 3D ballbot model,
the coupling terms between the two orthogonal planes
of motion contain products of sine of the body lean
angles, and hence, for small lean angles, the dynamics
of two decoupled planar models well approximate the
dynamics of the full 3D model. The trajectory planner
presented in Sec. VI uses the nonlinear dynamics of
the planar ballbot model to plan body lean motions that
achieve desired rest-to-rest motions. In this work, we are
interested only in simple planar rest-to-rest motions, and
--
used for drive motor currents and encoder signals permits
unlimited yaw rotation.
C. Legs
Each leg is 0.48 m long and is attached to a linear
screw drive with a ratio of 1.6 mm/revolution. The legs
are independently driven by three DC servomotors with
500 cpr encoders. Each leg has a hoof switch and a ball
--
of the ballbot used in this work along with this planar
configurations. The origin of the world frame is fixed to
the initial position of the center of the ball. Since we have
assumed a flat and level floor, the horizontal position of
the center of the ball xw matches the horizontal position
of the ball’s contact point on the floor. The body axis of
the robot is given by the line connecting the center of the
--
0

it
Linear F
-d slope c
−2
0
--
order to move around (Nagarajan et al. 2009a). The
balancing controller consists of two independent controllers, one for each of the vertical planes. Each one is a
Proportional-Integral-Derivative (PID) controller whose
gains were tuned manually. The balancing controller,
shown in the shaded part of Fig. 10, attempts to track
the desired center of mass projection on the floor.
While balancing, the body angles remain within ±0.1◦
--

−0.02
−0.02−0.01 0 0.01 0.02
X Linear Position (m)
(b)

0.3
--
Push
Start

Y Linear Position (m)

Y Linear Position (m)

#
!.
--

−0.1
−0.2 −0.1 0 0.1 0.2
X Linear Position (m)

Push
Push
−0.2
−0.2 −0.1 0 0.1 0.2
X Linear Position (m)

(a)

--
desired body angles depending on the error between the
ball’s current and desired positions. The PD controller’s
angle outputs are saturated to avoid large lean angles
and its gains were tuned manually. The XY plot of the
robot’s ball position under the action of balancing and
stationkeeping controllers are shown in Fig. 12(a) and
Fig. 12(b) respectively. Here, the ballbot was pushed
--
(Fig. 12(b)). The ball position was obtained from the
encoders on the ball motors. The companion video (Extension 1) shows the ballbot successfully stationkeeping
when subjected to human pushes.
2) Velocity Control: The velocity controller is a manually tuned Proportional-Integral (PI) controller that outputs desired body angles depending on the error between
the ball’s current and desired velocities. The velocity

Balancing Controller
--
keeping
PD

Y Linear Position (m)

To appear in the International Journal of Robotics Research (IJRR)

--
shows a graph of the leg 1 position as a function of the
body pitch angle. Similar graphs hold for legs 2 and 3.
The relationship between leg position ξ and body angle
ω is approximately linear of the form ξ = Kleg ω + cleg .
The legs-adjust controller uses the linear relationship
between body angles and leg positions to achieve body
angles close to zero when the ballbot is in SSS. After
such an operation, the legs-up controller and the balancing controller can be simultaneously used to achieve
--
capable of keeping the ballbot upright, while the stationkeeping controller presented in Sec. V-B is capable
of making the ballbot stick to its position on the floor.
However, any attempt to use the stationkeeping controller to track a desired ball motion on the floor will
result in jerky motions as the controllers fight against
the dynamics of the system to achieve this motion.
This is because the ballbot is an underactuated system
9
--
required to track the trajectories is obtained from the
equations of motion in (1). However, this open-loop
control input fails on the real robot due to modeling
errors, nonlinear friction effects, perturbations and wrong
initial conditions. In order to ensure accurate tracking
of the planned ball angle trajectory θp (t), a feedback
trajectory tracking controller is used as an outer loop
controller, similar to the ones described in Sec. V-B,
around the balancing controller.
The feedback trajectory tracking controller is a PID
controller whose gains were manually tuned. It feeds
back ball angle θ and outputs a compensation body
angle ωc to correct for the deviation of the ball position
from its desired trajectory θp (t). The balancing controller
--
(b)

Ball angle trajectory tracking: (a) X; (b) Y.
Y Linear Position (m)

Body Angle (◦ )

--
0.5
1
1.5
X Linear Position (m)

(b)
Fig. 24.
--

A. Ease of Mobility
It is desirable for robots operating in human environments to yield when pushed. Balancing mobile robots
react to a disturbing force to regain balance. Only a small
continuous applied force is required to move the robot
from one place to another, a behavior that is intrinsically
different from that of a statically stable robot. When the
--
is enough to keep the ballbot moving in any direction,
which implies that the ballbot can be moved around
with just a single finger as shown in the companion
video (Extension 1). Figure 25(a) presents the linear
velocity trajectories of the ballbot when pushed with
three different constant forces. For a 5 s constant push,
a 4.6 N force moved the robot from 0 to 0.23 m/s, while
--

12

Y Linear Position (m)

To appear in the International Journal of Robotics Research (IJRR)

--
−0.5
0
0.5
X Linear Position (m)

Fig. 28. The XY motion of the ball on the floor during human intent
detection behavior.
--
S. Miles, N. Farrington, K. Thomas, and D. Gage.
Segway robotic mobility platform. In SPIE Proc.
5609: Mobile Robots XVII, October 2004.
R. Olfati-Saber. Nonlinear control of underactuated
mechanical systems with application to robotics and
aerospace vehicles. PhD thesis, Massachusetts Institute of Technology, 2001.
G. Oriolo and Y. Nakamura. Control of mechanical
